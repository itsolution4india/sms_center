<div class="row g-3">
    <!-- User Information Section -->
    <div class="col-12">
      <div class="card mb-3">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-user me-2"></i>User Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="senderID" class="form-label">Sender ID</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                <input type="text" class="form-control" id="senderID" name="SenderID" value="{{ user.SenderID|default:'' }}" required>
              </div>
              <div class="invalid-feedback">Please provide a valid Sender ID.</div>
            </div>

            <div class="col-md-6">
                <label for="username" class="form-label">Username</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-user"></i></span>
                  <input type="text" class="form-control" id="username" name="username" value="{{ user.username|default:'' }}" required>
                </div>
                <div class="invalid-feedback">Please provide a username.</div>
            </div>
            
            <div class="col-md-6">
              <label for="accountID" class="form-label">Account ID</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-fingerprint"></i></span>
                <input type="text" class="form-control" id="accountID" name="account_id" value="{{ user.account_id|default:'' }}" required>
              </div>
              <div class="invalid-feedback">Please provide a valid Account ID.</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Financial Information Section -->
    <div class="col-12">
      <div class="card mb-3">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-money-bill me-2"></i>Financial Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="balance" class="form-label">Balance</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-dollar-sign"></i></span>
                <input type="number" step="0.01" class="form-control" id="balance" name="balance" value="{{ user.balance|default:0 }}" required>
              </div>
              <div class="invalid-feedback">Please provide a valid balance.</div>
            </div>
            
            <div class="col-md-6">
              <label for="tps" class="form-label">TPS</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-tachometer-alt"></i></span>
                <input type="number" class="form-control" id="tps" name="tps" value="{{ user.tps|default:0 }}" required>
              </div>
              <div class="invalid-feedback">Please provide a valid TPS value.</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Service Information Section -->
    <div class="col-12">
      <div class="card mb-3">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>Service Configuration</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="service" class="form-label">Service</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-server"></i></span>
                <select class="form-select" id="service" name="Service">
                  <option value="" {% if not user.Service %}selected{% endif %}>Select a service</option>
                  <option value="SMS" {% if user.Service == 'SMS' %}selected{% endif %}>SMS</option>
                  <option value="WhatsApp" {% if user.Service == 'WhatsApp' %}selected{% endif %}>WhatsApp</option>
                  <option value="Email" {% if user.Service == 'Email' %}selected{% endif %}>Email</option>
                </select>
              </div>
              <div class="invalid-feedback">Please select a service.</div>
            </div>
            
            <div class="col-md-6">
              <label for="number" class="form-label">Number</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                <input type="text" class="form-control" id="number" name="number" value="{{ user.number|default:'' }}">
              </div>
            </div>
            
            <div class="col-md-6">
              <label for="appName" class="form-label">App Name</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-mobile-alt"></i></span>
                <input type="text" class="form-control" id="appName" name="app_name" value="{{ user.app_name|default:'' }}">
              </div>
            </div>
            
            <div class="col-md-6">
              <label for="phoneID" class="form-label">Phone ID</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-mobile"></i></span>
                <input type="text" class="form-control" id="phoneID" name="phone_id" value="{{ user.phone_id|default:'' }}">
              </div>
            </div>
            
            <div class="col-md-6">
              <label for="wabaID" class="form-label">WABA ID</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fab fa-whatsapp"></i></span>
                <input type="text" class="form-control" id="wabaID" name="waba_id" value="{{ user.waba_id|default:'' }}">
              </div>
            </div>
            
            <div class="col-12">
              <label for="token" class="form-label">API Token</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-key"></i></span>
                <textarea class="form-control" id="token" name="token" rows="3">{{ user.token|default:'' }}</textarea>
                <button class="btn btn-outline-secondary" type="button" onclick="toggleVisibility('token')">
                  <i class="fas fa-eye" id="tokenEye"></i>
                </button>
              </div>
              <div class="form-text">Authentication token for API access.</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Template Information Section -->
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-file-alt me-2"></i>Template Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="templateName" class="form-label">Template Name</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-file-code"></i></span>
                <input type="text" class="form-control" id="templateName" name="template_name" value="{{ user.template_name|default:'' }}">
              </div>
            </div>
            
            <div class="col-md-6">
              <label for="language" class="form-label">Language</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-language"></i></span>
                <select class="form-select" id="language" name="language">
                  <option value="en" {% if user.language == 'en' or not user.language %}selected{% endif %}>English</option>
                  <option value="es" {% if user.language == 'es' %}selected{% endif %}>Spanish</option>
                  <option value="fr" {% if user.language == 'fr' %}selected{% endif %}>French</option>
                  <option value="pt" {% if user.language == 'pt' %}selected{% endif %}>Portuguese</option>
                  <option value="de" {% if user.language == 'de' %}selected{% endif %}>German</option>
                  <option value="it" {% if user.language == 'it' %}selected{% endif %}>Italian</option>
                  <option value="ar" {% if user.language == 'ar' %}selected{% endif %}>Arabic</option>
                  <option value="zh" {% if user.language == 'zh' %}selected{% endif %}>Chinese</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    function toggleVisibility(id) {
      const element = document.getElementById(id);
      const eyeIcon = document.getElementById(id + 'Eye');
      
      if (element.type === 'password' || (element.tagName === 'TEXTAREA' && element.style.webkitTextSecurity === 'disc')) {
        element.style.webkitTextSecurity = '';
        element.style.fontFamily = 'inherit';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      } else {
        element.style.webkitTextSecurity = 'disc';
        element.style.fontFamily = 'text-security-disc';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      }
    }
    
    // Add input masking for sensitive fields
    document.addEventListener('DOMContentLoaded', function() {
      const tokenField = document.getElementById('token');
      tokenField.style.webkitTextSecurity = 'disc';
      tokenField.style.fontFamily = 'text-security-disc';
    });
  </script>